# Migration `20190807161739-init`

This migration has been generated by Jaco Basson at 8/7/2019, 4:17:39 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "fullstack"."User"("id" text NOT NULL  ,"email" text NOT NULL DEFAULT '' ,"username" text NOT NULL DEFAULT '' ,"createdAt" timestamp(3) NOT NULL  ,"firstName" text   ,"lastName" text   ,"profilePictureURL" text NOT NULL DEFAULT '' ,PRIMARY KEY ("id"));

CREATE TABLE "fullstack"."Review"("id" text NOT NULL  ,"createdAt" timestamp(3) NOT NULL  ,"rating" integer NOT NULL DEFAULT 0 ,"description" text NOT NULL DEFAULT '' ,PRIMARY KEY ("id"));

CREATE TABLE "fullstack"."Restaurant"("id" text NOT NULL  ,"name" text NOT NULL DEFAULT '' ,"picture" text NOT NULL DEFAULT '' ,"location" text NOT NULL DEFAULT '' ,PRIMARY KEY ("id"));

ALTER TABLE "fullstack"."Review" ADD COLUMN "author" text NOT NULL  REFERENCES "fullstack"."User"("id"),ADD COLUMN "restaurant" text NOT NULL  REFERENCES "fullstack"."Restaurant"("id");

CREATE UNIQUE INDEX "User.id._UNIQUE" ON "fullstack"."User"("id")

CREATE UNIQUE INDEX "User.email._UNIQUE" ON "fullstack"."User"("email")

CREATE UNIQUE INDEX "User.username._UNIQUE" ON "fullstack"."User"("username")

CREATE UNIQUE INDEX "Review.id._UNIQUE" ON "fullstack"."Review"("id")

CREATE UNIQUE INDEX "Restaurant.id._UNIQUE" ON "fullstack"."Restaurant"("id")
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..20190807161739-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,36 @@
+datasource db {
+  provider = "postgresql"
+  url      = "postgresql://Jaco2@localhost:5432/fullstack_project?schema=fullstack"
+}
+
+generator photonjs {
+  provider = "photonjs"
+}
+
+model User {
+  id                String   @id @default(cuid()) @unique
+  email             String   @unique
+  username          String   @unique
+  createdAt         DateTime @default(now())
+  firstName         String?
+  lastName          String?
+  profilePictureURL String
+  reviews           Review[]
+}
+
+model Review {
+  id          String     @id @default(cuid()) @unique
+  createdAt   DateTime   @default(now())
+  rating      Int
+  description String
+  author      User
+  restaurant  Restaurant
+}
+
+model Restaurant {
+  id       String   @id @default(cuid()) @unique
+  name     String
+  picture  String
+  location String
+  reviews  Review[]
+}
```

## Photon Usage

You can use a specific Photon built for this migration (20190807161739-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190807161739-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
